<div class="container vh-100 d-flex flex-column justify-content-center align-items-center">
  @if (!bool ) {
  <div class="container w-50 d-flex flex-column justify-content-center shadow-lg color">
    <div class="row w-100 d-flex justify-content-center">
      <form class="row w-50 gy-3 gx-0 py-3 rounded-2"
  (ngSubmit)="checkpassword(pass.value)"
  #check="ngForm">
    <h3 class="text-center fw-bolder my-1 All1">Write Your password</h3>
    <div class="d-flex justify-content-center">
      @if (errorpass!='') {
        <div class="container my-1 d-flex justify-content-center text-bg-danger">
          <h3 class="All1 text-center fw-bolder my-1">{{errorpass}}</h3>
          </div>
      }
    </div>
    <div class="col-10 mx-auto">
      <label for="inputPassword7" class="form-label All1">Password</label>
      <div class="input-group flex-nowrap">
        <input
          [type]="showPassword ? 'text' : 'password'"
        class="form-control"
        id="inputPassword7"
        required
        name="password"
        aria-label="Password"
        aria-describedby="addon-wrapping"
        [(ngModel)]="user.password"
        #passwordinput="ngModel"
        #pass
        minlength="6"
       pattern="^([a-zA-Z]+|\d+|(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@.]).{6,})$"
        [ngClass]="{'is-invalid': (passwordinput.dirty || passwordinput.touched)&& passwordinput.invalid,
          'is-valid':passwordinput.valid
        }"
      />
      <span class="All2 input-group-text" id="addon-wrapping" (click)="togglePassword()" style="cursor: pointer;">
        <i [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword" class="fa-solid"></i>
      </span>
    </div>
      <div class="invalid-feedback All3">
        @if(passwordinput.errors?.['required'] ) {
          <span>password is required</span>
        } @else if (passwordinput.errors?.['minlength'] ) {
          <span>password most be at least 6 charcters</span>
        }
        @else if (passwordinput.errors?.['pattern'] ) {
          <span>password most be at least one small and one captail charcters and numbers</span>
        }

      </div>
    </div>
    <div class="col-10 mx-auto">
      <button type="submit" class="btn btn-dark All1" [disabled]="check.invalid">Update</button>
    </div>
  </form>
  </div>
  @if (select==true) {
    <div class="row w-100 d-flex justify-content-center">
      <form class="row w-50 gy-3 gx-0 py-3 rounded-2"
      (ngSubmit)="updatePassword(pass1.value,pass2.value)"
      #update="ngForm">
        <h3 class="text-center fw-bolder my-1 All1">Update password</h3>
        <div class="d-flex justify-content-center">
          @if (errorMessage!='') {
            <div class="container my-5 d-flex justify-content-center text-bg-danger">
              <h3 class="text-center fw-bolder my-1  All2">{{errorMessage}}</h3>
              </div>
          }
        </div>
        <div class="col-10 mx-auto">
          <label for="inputPassword4" class="form-label All2">Update Password</label>
          <div class="input-group flex-nowrap">
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control All2"
              id="inputPassword4"
              required
              aria-label="Password"
              aria-describedby="addon-wrapping"
              name="password"
              [(ngModel)]="user.password"
              #Updatepasswordinput="ngModel"
              minlength="6"
              #pass1
              pattern="^([a-zA-Z]+|\d+|(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@.]).{6,})$"
              [ngClass]="{
                'is-invalid': (Updatepasswordinput.dirty || Updatepasswordinput.touched) && Updatepasswordinput.invalid,
                'is-valid': Updatepasswordinput.valid
              }"
            />
            <span class="All2 input-group-text" id="addon-wrapping" (click)="togglePassword()" style="cursor: pointer;">
              <i [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword" class="fa-solid"></i>
            </span>
          </div>
          <div class="invalid-feedback All3">
            @if (Updatepasswordinput.errors?.['required'] ) {
              <span>password is required</span>
            } @else if (Updatepasswordinput.errors?.['minlength'] ) {
              <span>password most be at least 6 charcters</span>
            }
            @else if (Updatepasswordinput.errors?.['pattern'] ) {
              <span>password most be at least one small and one captail charcters and numbers</span>
            }
          </div>
        </div>
        <div class="col-10 mx-auto">
          <label for="inputPassword2" class="form-label All1">Retype the password</label>
          <div class="input-group flex-nowrap">
            <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-control All2"
            id="inputPassword2"
            required
            aria-label="Password"
            aria-describedby="addon-wrapping"
            name="newpassword"
            [(ngModel)]="password2"
            #newpasswordinput="ngModel"
            #pass2
            minlength="6"
           pattern="^([a-zA-Z]+|\d+|(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@.]).{6,})$"
            [ngClass]="{'is-invalid': (newpasswordinput.dirty || newpasswordinput.touched)&& newpasswordinput.invalid,
              'is-valid':newpasswordinput.valid
            }"
          />
          <span class="All2 input-group-text" id="addon-wrapping" (click)="togglePassword()" style="cursor: pointer;">
            <i [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword" class="fa-solid"></i>
          </span>
        </div>
          <div class="invalid-feedback All3">
            @if (newpasswordinput.errors?.['required'] ) {
              <span>password is required</span>
            } @else if (newpasswordinput.errors?.['minlength'] ) {
              <span>password most be at least 6 charcters</span>
            }
            @else if (newpasswordinput.errors?.['pattern'] ) {
              <span>password most be at least one small and one captail charcters and numbers</span>
            }
          </div>
        </div>
        <div class="col-10 mx-auto">
          <button type="submit" class="btn btn-dark All1" [disabled]="update.invalid">Update</button>
        </div>
      </form>
    </div>
  }
  </div>
  }
  @if(bool==true) {
    <div class="container my-5 d-flex justify-content-center text-bg-success All1">
      <h3 class="text-center fw-bolder my-1">update passwored is correct</h3>
      </div>
    }
    <div class="container my-5 d-flex justify-content-center">
      <button class="btn btn-primary All1" (click)="back()">go back</button>
    </div>
</div>
